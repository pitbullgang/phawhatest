<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PHAWHA | Person List</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;500;700&display=swap" rel="stylesheet" />
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="style-person.css">
</head>
<body>
  <audio id="list-music" loop>
    <source src="bg.mp3" type="audio/mpeg">
  </audio>

  <video autoplay muted loop playsinline id="bg-video">
    <source src="pain.mp4" type="video/mp4">
  </video>

  <canvas id="particleCanvas"></canvas>

  <nav class="back-nav">
    <button class="back-btn" onclick="window.location.href='index.html'">BACK TO HOME</button>
  </nav>

  <div class="container">
    <header>GANG LIST</header>

    <div class="search-container">
      <i class='bx bx-search'></i>
      <input type="text" id="searchInput" class="search-box" placeholder="SEARCH MEMBERS...">
    </div>

    <section id="founderSection" style="display: none;">
      <h2>Founder</h2>
      <div class="list" id="founderlist"></div>
    </section>

    <section id="leaderSection">
      <h2>Leader</h2>
      <div class="list" id="leaderlist"></div>
    </section>

    <section id="memberSection">
      <h2>Member</h2>
      <div class="list" id="memberlist"></div>
      <div id="pagination-controls" class="pagination-container"></div>
    </section>

    <footer>Â© DESIGNED BY KEN.</footer>
  </div>

  <script src="script.js"></script> 

<script>
    const defaultImage = "https://i.pinimg.com/originals/91/ab/f0/91abf0d74be5d9aeb1346178e70dde96.gif";
    
    // ðŸŒŸ à¸›à¸£à¸°à¸à¸²à¸¨à¸•à¸±à¸§à¹à¸›à¸£à¹„à¸§à¹‰à¸”à¹‰à¸²à¸™à¸šà¸™à¸ªà¸¸à¸”à¹€à¸žà¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¸—à¸¸à¸à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¹€à¸£à¸µà¸¢à¸à¹ƒà¸Šà¹‰à¹„à¸”à¹‰
    let allData = [];    
    let allMembers = []; 
    const itemsPerPage = 8; 
    let currentPage = 1;

    // --- ðŸ›¡ï¸ 1. Anti-Inspect ---
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.onkeydown = function(e) {
      if (e.keyCode == 123) return false;
      if (e.ctrlKey && e.shiftKey && (e.keyCode == 73 || e.keyCode == 74)) return false;
      if (e.ctrlKey && e.keyCode == 85) return false;
    };

    // --- ðŸ‘¥ 2. Card Creator ---
    function createCard(person) {
      const imgSrc = person.image && person.image.trim() !== "" ? person.image : defaultImage;
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <img src="${imgSrc}" class="profile" alt="profile">
        <h3>${person.name}</h3>
        <a href="${person.facebook}" target="_blank" class="fb-link">FACEBOOK</a>
      `;
      return card;
    }

    // --- ðŸ“„ 3. Pagination System ---
    function displayMembers(membersArray) {
      const memberList = document.getElementById("memberlist");
      const founderSection = document.getElementById("founderSection");
      const leaderSection = document.getElementById("leaderSection");
      const paginationControls = document.getElementById("pagination-controls");
      
      memberList.innerHTML = "";
      
      // à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¸«à¸™à¹‰à¸² 1 à¹‚à¸Šà¸§à¹Œà¸¢à¸¨à¸ªà¸¹à¸‡ à¸«à¸™à¹‰à¸²à¸­à¸·à¹ˆà¸™à¸‹à¹ˆà¸­à¸™
      if (currentPage === 1) {
          founderSection.style.display = "block";
          leaderSection.style.display = "block";
      } else {
          founderSection.style.display = "none";
          leaderSection.style.display = "none";
      }

      const start = (currentPage - 1) * itemsPerPage;
      const end = start + itemsPerPage;
      const paginatedItems = membersArray.slice(start, end);
      
      paginatedItems.forEach(p => memberList.appendChild(createCard(p)));
      renderPagination(membersArray.length);
    }

    function renderPagination(totalItems) {
      const totalPages = Math.ceil(totalItems / itemsPerPage);
      const container = document.getElementById("pagination-controls");
      container.innerHTML = "";
      if (totalPages <= 1) return;

      for (let i = 1; i <= totalPages; i++) {
        const btn = document.createElement("button");
        btn.innerText = i;
        btn.className = (i === currentPage) ? "page-btn active" : "page-btn";
        btn.onclick = () => {
          currentPage = i;
          displayMembers(allMembers);
          window.scrollTo({ top: 0, behavior: 'smooth' });
        };
        container.appendChild(btn);
      }
    }

// --- ðŸ” à¸£à¸°à¸šà¸šà¸„à¹‰à¸™à¸«à¸² (à¸‰à¸šà¸±à¸šà¹à¸à¹‰à¹„à¸‚: à¸¥à¸šà¹à¸¥à¹‰à¸§à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¹€à¸”à¹‰à¸‡à¸à¸¥à¸±à¸šà¸„à¸£à¸š) ---
const searchInput = document.getElementById("searchInput");

searchInput.addEventListener("input", e => {
    const val = e.target.value.toLowerCase().trim();
    
    // à¸”à¸¶à¸‡ Section à¹à¸¥à¸° List à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
    const fSection = document.getElementById("founderSection");
    const lSection = document.getElementById("leaderSection");
    const mSection = document.getElementById("memberSection");
    const pagination = document.getElementById("pagination-controls");

    const founderList = document.getElementById("founderlist");
    const leaderList = document.getElementById("leaderlist");
    const memberList = document.getElementById("memberlist");

    if (val === "") {
        // ðŸŸ¢ à¸à¸£à¸“à¸µà¸¥à¸šà¸ˆà¸™à¸§à¹ˆà¸²à¸‡: à¸•à¹‰à¸­à¸‡à¸„à¸·à¸™à¸„à¹ˆà¸²à¸—à¸¸à¸à¸­à¸¢à¹ˆà¸²à¸‡à¸à¸¥à¸±à¸šà¸¡à¸²à¹€à¸«à¸¡à¸·à¸­à¸™à¸•à¸­à¸™à¹‚à¸«à¸¥à¸”à¸«à¸™à¹‰à¸²à¹€à¸§à¹‡à¸šà¹ƒà¸«à¸¡à¹ˆ
        currentPage = 1;
        
        // 1. à¸¥à¹‰à¸²à¸‡à¸„à¹ˆà¸²à¹€à¸à¹ˆà¸²à¹ƒà¸™à¸¥à¸´à¸ªà¸•à¹Œà¸­à¸­à¸à¸à¹ˆà¸­à¸™à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸‹à¹‰à¸³
        founderList.innerHTML = "";
        leaderList.innerHTML = "";
        
        // 2. à¸§à¸²à¸” Founder à¹à¸¥à¸° Leader à¸à¸¥à¸±à¸šà¸¥à¸‡à¹„à¸›à¹ƒà¸«à¸¡à¹ˆ
        const founders = allData.filter(p => p.permission === "founder");
        const leaders = allData.filter(p => p.permission === "leader");
        
        founders.forEach(p => founderList.appendChild(createCard(p)));
        leaders.forEach(p => leaderList.appendChild(createCard(p)));

        // 3. à¹ƒà¸Šà¹‰à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¹€à¸”à¸´à¸¡à¸ˆà¸±à¸”à¸à¸²à¸£à¸«à¸™à¹‰à¸² Member à¹à¸¥à¸°à¸›à¸¸à¹ˆà¸¡ 1 2 3
        displayMembers(allMembers);
        
        // 4. à¸¡à¸±à¹ˆà¸™à¹ƒà¸ˆà¸§à¹ˆà¸²à¹€à¸›à¸´à¸” Section à¸«à¸¥à¸±à¸à¸à¸¥à¸±à¸šà¸¡à¸²
        fSection.style.display = founders.length > 0 ? "block" : "none";
        lSection.style.display = "block";
        mSection.style.display = "block";
        pagination.style.display = "flex";

    } else {
        // ðŸ”´ à¸à¸£à¸“à¸µà¸¡à¸µà¸à¸²à¸£à¸žà¸´à¸¡à¸žà¹Œ: à¸‹à¹ˆà¸­à¸™à¸›à¸¸à¹ˆà¸¡ à¹à¸¥à¸°à¸à¸£à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸•à¸²à¸¡à¸¢à¸¨à¸ˆà¸£à¸´à¸‡
        pagination.style.display = "none";
        
        founderList.innerHTML = "";
        leaderList.innerHTML = "";
        memberList.innerHTML = "";

        const filtered = allData.filter(p => p.name.toLowerCase().includes(val));

        filtered.forEach(p => {
            const card = createCard(p);
            if (p.permission === "founder") founderList.appendChild(card);
            else if (p.permission === "leader") leaderList.appendChild(card);
            else memberList.appendChild(card);
        });

        // à¸‹à¹ˆà¸­à¸™ Section à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸¡à¸µà¸„à¸™à¸•à¸£à¸‡à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚
        fSection.style.display = founderList.children.length > 0 ? "block" : "none";
        lSection.style.display = leaderList.children.length > 0 ? "block" : "none";
        mSection.style.display = memberList.children.length > 0 ? "block" : "none";
        
        if (filtered.length === 0) {
            mSection.style.display = "block";
            memberList.innerHTML = `<p style="opacity:0.5; width:100%; margin-top:50px;">à¹„à¸¡à¹ˆà¸žà¸šà¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸—à¸µà¹ˆà¸„à¹‰à¸™à¸«à¸²...</p>`;
        }
    }
});

    // --- ðŸš€ 5. Load Data ---
    fetch("person.json")
      .then(res => res.json())
      .then(data => {
        allData = data; // ðŸŒŸ à¸ˆà¸¸à¸”à¸ªà¸³à¸„à¸±à¸: à¸•à¹‰à¸­à¸‡à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸”à¸´à¸šà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¹„à¸§à¹‰à¸—à¸µà¹ˆà¸™à¸µà¹ˆ
        
        const founderList = document.getElementById("founderlist");
        const leaderList = document.getElementById("leaderlist");

        const founders = data.filter(p => p.permission === "founder");
        const leaders = data.filter(p => p.permission === "leader");
        allMembers = data.filter(p => p.permission === "member"); 

        // à¸§à¸²à¸” Founder/Leader à¸£à¸­à¹„à¸§à¹‰
        founders.forEach(p => founderList.appendChild(createCard(p)));
        leaders.forEach(p => leaderList.appendChild(createCard(p)));
        
        // à¹à¸ªà¸”à¸‡à¸œà¸¥à¸«à¸™à¹‰à¸² 1
        displayMembers(allMembers);
      })
      .catch(err => console.error("à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ:", err));
  </script>
</body>
</html>

