<audio id="list-music" loop>
    <source src="" type="audio/mpeg">
</audio>

<script src="script.js"></script> 

<script>
    const defaultImage = "https://i.pinimg.com/originals/91/ab/f0/91abf0d74be5d9aeb1346178e70dde96.gif";
    
    let allData = [];    
    let allMembers = []; 
    const itemsPerPage = 8; 
    let currentPage = 1;

    // --- ðŸ›¡ï¸ 1. Anti-Inspect ---
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.onkeydown = function(e) {
      if (e.keyCode == 123) return false;
      if (e.ctrlKey && e.shiftKey && (e.keyCode == 73 || e.keyCode == 74)) return false;
      if (e.ctrlKey && e.keyCode == 85) return false;
    };

    // --- ðŸ‘¥ 2. Card Creator ---
    function createCard(person) {
      const imgSrc = person.image && person.image.trim() !== "" ? person.image : defaultImage;
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <img src="${imgSrc}" class="profile" alt="profile">
        <h3>${person.name}</h3>
        <a href="${person.facebook}" target="_blank" class="fb-link">FACEBOOK</a>
      `;
      return card;
    }

    // --- ðŸ“„ 3. Pagination System ---
    function displayMembers(membersArray) {
      const memberList = document.getElementById("memberlist");
      const founderSection = document.getElementById("founderSection");
      const leaderSection = document.getElementById("leaderSection");
      const paginationControls = document.getElementById("pagination-controls");
      
      memberList.innerHTML = "";
      
      if (currentPage === 1) {
          founderSection.style.display = "block";
          leaderSection.style.display = "block";
      } else {
          founderSection.style.display = "none";
          leaderSection.style.display = "none";
      }

      const start = (currentPage - 1) * itemsPerPage;
      const end = start + itemsPerPage;
      const paginatedItems = membersArray.slice(start, end);
      
      paginatedItems.forEach(p => memberList.appendChild(createCard(p)));
      renderPagination(membersArray.length);
    }

    function renderPagination(totalItems) {
      const totalPages = Math.ceil(totalItems / itemsPerPage);
      const container = document.getElementById("pagination-controls");
      container.innerHTML = "";
      if (totalPages <= 1) return;

      for (let i = 1; i <= totalPages; i++) {
        const btn = document.createElement("button");
        btn.innerText = i;
        btn.className = (i === currentPage) ? "page-btn active" : "page-btn";
        btn.onclick = () => {
          currentPage = i;
          displayMembers(allMembers);
          window.scrollTo({ top: 0, behavior: 'smooth' });
        };
        container.appendChild(btn);
      }
    }

    // --- ðŸ” 4. à¸£à¸°à¸šà¸šà¸„à¹‰à¸™à¸«à¸² (à¸‰à¸šà¸±à¸šà¹€à¸ªà¸–à¸µà¸¢à¸£) ---
    const searchInput = document.getElementById("searchInput");
    searchInput.addEventListener("input", e => {
        const val = e.target.value.toLowerCase().trim();
        const fSection = document.getElementById("founderSection");
        const lSection = document.getElementById("leaderSection");
        const mSection = document.getElementById("memberSection");
        const pagination = document.getElementById("pagination-controls");
        const founderList = document.getElementById("founderlist");
        const leaderList = document.getElementById("leaderlist");
        const memberList = document.getElementById("memberlist");

        if (val === "") {
            currentPage = 1;
            founderList.innerHTML = "";
            leaderList.innerHTML = "";
            const founders = allData.filter(p => p.permission === "founder");
            const leaders = allData.filter(p => p.permission === "leader");
            founders.forEach(p => founderList.appendChild(createCard(p)));
            leaders.forEach(p => leaderList.appendChild(createCard(p)));
            displayMembers(allMembers);
            pagination.style.display = "flex";
        } else {
            pagination.style.display = "none";
            founderList.innerHTML = "";
            leaderList.innerHTML = "";
            memberList.innerHTML = "";
            const filtered = allData.filter(p => p.name.toLowerCase().includes(val));
            filtered.forEach(p => {
                const card = createCard(p);
                if (p.permission === "founder") founderList.appendChild(card);
                else if (p.permission === "leader") leaderList.appendChild(card);
                else memberList.appendChild(card);
            });
            fSection.style.display = founderList.children.length > 0 ? "block" : "none";
            lSection.style.display = leaderList.children.length > 0 ? "block" : "none";
            mSection.style.display = memberList.children.length > 0 ? "block" : "none";
            if (filtered.length === 0) {
                mSection.style.display = "block";
                memberList.innerHTML = `<p style="opacity:0.5; width:100%; margin-top:50px; text-align:center;">à¹„à¸¡à¹ˆà¸žà¸šà¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸—à¸µà¹ˆà¸„à¹‰à¸™à¸«à¸²...</p>`;
            }
        }
    });

    // --- ðŸš€ 5. Load Data ---
    fetch("person.json")
      .then(res => res.json())
      .then(data => {
        allData = data; 
        const founderList = document.getElementById("founderlist");
        const leaderList = document.getElementById("leaderlist");
        const founders = data.filter(p => p.permission === "founder");
        const leaders = data.filter(p => p.permission === "leader");
        allMembers = data.filter(p => p.permission === "member"); 

        founders.forEach(p => founderList.appendChild(createCard(p)));
        leaders.forEach(p => leaderList.appendChild(createCard(p)));
        displayMembers(allMembers);
      })
      .catch(err => console.error("à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ:", err));
</script>
