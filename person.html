<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PHAWHA | Person List</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;500;700&display=swap" rel="stylesheet" />
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="style-person.css">
</head>
<body>
  <audio id="list-music" loop>
    <source src="bg.mp3" type="audio/mpeg">
  </audio>

  <video autoplay muted loop playsinline id="bg-video">
    <source src="pain.mp4" type="video/mp4">
  </video>

  <canvas id="particleCanvas"></canvas>

  <nav class="back-nav">
    <button class="back-btn" onclick="window.location.href='index.html'">BACK TO HOME</button>
  </nav>

  <div class="container">
    <header>GANG LIST</header>

    <div class="search-container">
      <i class='bx bx-search'></i>
      <input type="text" id="searchInput" class="search-box" placeholder="SEARCH MEMBERS...">
    </div>

    <section id="founderSection" style="display: none;">
      <h2>Founder</h2>
      <div class="list" id="founderlist"></div>
    </section>

    <section id="leaderSection">
      <h2>Leader</h2>
      <div class="list" id="leaderlist"></div>
    </section>

    <section id="memberSection">
      <h2>Member</h2>
      <div class="list" id="memberlist"></div>
      <div id="pagination-controls" class="pagination-container"></div>
    </section>

    <footer>Â© DESIGNED BY KEN.</footer>
  </div>

  <script src="script.js"></script> 

<script>
    const defaultImage = "https://i.pinimg.com/originals/91/ab/f0/91abf0d74be5d9aeb1346178e70dde96.gif";
    
    let allData = [];    // ðŸŒŸ à¹€à¸žà¸´à¹ˆà¸¡à¸•à¸±à¸§à¹à¸›à¸£à¸™à¸µà¹‰à¹€à¸žà¸·à¹ˆà¸­à¹€à¸à¹‡à¸šà¸—à¸¸à¸à¸„à¸™ (Founder + Leader + Member)
    let allMembers = []; // à¹€à¸à¹‡à¸šà¹€à¸‰à¸žà¸²à¸° Member à¸ªà¸³à¸«à¸£à¸±à¸šà¸£à¸°à¸šà¸šà¹à¸šà¹ˆà¸‡à¸«à¸™à¹‰à¸²
    const itemsPerPage = 8; 
    let currentPage = 1;

    // ... (à¸ªà¹ˆà¸§à¸™ Anti-Inspect à¹à¸¥à¸° Music à¹€à¸«à¸¡à¸·à¸­à¸™à¹€à¸”à¸´à¸¡) ...

    // --- ðŸ“„ 4. Pagination System ---
    function displayMembers(membersArray) {
      const memberList = document.getElementById("memberlist");
      const founderSection = document.getElementById("founderSection");
      const leaderSection = document.getElementById("leaderSection");
      
      memberList.innerHTML = "";

      // à¸–à¹‰à¸²à¸­à¸¢à¸¹à¹ˆà¸«à¸™à¹‰à¸² 1 à¹ƒà¸«à¹‰à¹‚à¸Šà¸§à¹Œ Founder/Leader à¸›à¸à¸•à¸´
      if (currentPage === 1) {
          founderSection.style.display = "block";
          leaderSection.style.display = "block";
      } else {
          founderSection.style.display = "none";
          leaderSection.style.display = "none";
      }

      const start = (currentPage - 1) * itemsPerPage;
      const end = start + itemsPerPage;
      const paginatedItems = membersArray.slice(start, end);
      
      paginatedItems.forEach(p => memberList.appendChild(createCard(p)));
      renderPagination(membersArray.length);
    }

    // --- ðŸ” 5. Search System (à¹à¸à¹‰à¹„à¸‚à¹ƒà¸«à¹‰à¸„à¹‰à¸™à¸«à¸²à¹„à¸”à¹‰à¸—à¸¸à¸à¸„à¸™) ---
    const searchInput = document.getElementById("searchInput");
    searchInput.addEventListener("input", e => {
      const val = e.target.value.toLowerCase().trim();
      const founderSection = document.getElementById("founderSection");
      const leaderSection = document.getElementById("leaderSection");
      const paginationControls = document.getElementById("pagination-controls");
      const memberList = document.getElementById("memberlist");

      if (val === "") {
        // à¸à¸¥à¸±à¸šà¸ªà¸¹à¹ˆà¹‚à¸«à¸¡à¸”à¸›à¸à¸•à¸´ (Page 1 2 3)
        currentPage = 1;
        displayMembers(allMembers);
        paginationControls.style.display = "flex";
      } else {
        // ðŸ›‘ à¸ªà¸±à¹ˆà¸‡à¸‹à¹ˆà¸­à¸™à¸—à¸¸à¸ Section à¸à¹ˆà¸­à¸™
        founderSection.style.display = "none";
        leaderSection.style.display = "none";
        paginationControls.style.display = "none";

        // ðŸ” à¸„à¹‰à¸™à¸«à¸²à¸ˆà¸²à¸ allData (à¸‹à¸¶à¹ˆà¸‡à¸£à¸§à¸¡à¸—à¸¸à¸à¸¢à¸¨à¹à¸¥à¹‰à¸§)
        const filtered = allData.filter(person => person.name.toLowerCase().includes(val));
        
        memberList.innerHTML = "";
        
        if (filtered.length > 0) {
          // à¸–à¹‰à¸²à¸«à¸²à¹€à¸ˆà¸­ à¹ƒà¸«à¹‰à¹€à¸­à¸²à¸¡à¸²à¹‚à¸Šà¸§à¹Œà¹ƒà¸™à¸Šà¹ˆà¸­à¸‡ memberList (à¹€à¸žà¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¸„à¸™à¸­à¸·à¹ˆà¸™à¸«à¸²à¸¢à¸«à¸¡à¸”à¹€à¸«à¸¥à¸·à¸­à¹à¸•à¹ˆà¸„à¸™à¸—à¸µà¹ˆà¹€à¸£à¸²à¸«à¸²)
          filtered.forEach(p => memberList.appendChild(createCard(p)));
        } else {
          memberList.innerHTML = `<p style="opacity:0.5; width:100%; margin-top:50px;">à¹„à¸¡à¹ˆà¸žà¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸Šà¸·à¹ˆà¸­à¸™à¸µà¹‰à¹ƒà¸™à¸£à¸°à¸šà¸š...</p>`;
        }
      }
    });

    // --- ðŸš€ 6. Initial Load ---
    fetch("person.json")
      .then(res => res.json())
      .then(data => {
        allData = data; // ðŸŒŸ à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ "à¸—à¸¸à¸à¸„à¸™" à¹„à¸§à¹‰à¸—à¸µà¹ˆà¸™à¸µà¹ˆà¹€à¸žà¸·à¹ˆà¸­à¹ƒà¸Šà¹‰à¸„à¹‰à¸™à¸«à¸²
        
        const founderList = document.getElementById("founderlist");
        const leaderList = document.getElementById("leaderlist");

        const founders = data.filter(p => p.permission === "founder");
        const leaders = data.filter(p => p.permission === "leader");
        allMembers = data.filter(p => p.permission === "member"); // à¹à¸¢à¸à¹€à¸‰à¸žà¸²à¸° Member à¹„à¸§à¹‰à¸—à¸³à¹€à¸¥à¸‚à¸«à¸™à¹‰à¸²

        if(founders.length > 0) founders.forEach(p => founderList.appendChild(createCard(p)));
        leaders.forEach(p => leaderList.appendChild(createCard(p)));
        
        displayMembers(allMembers);
      });
  </script>
</body>
</html>




