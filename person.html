<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PHAWHA | Person List</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;500;700&display=swap" rel="stylesheet" />
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="style-person.css">
</head>
<body>
  <audio id="list-music" loop>
    <source src="bg.mp3" type="audio/mpeg">
  </audio>

  <video autoplay muted loop playsinline id="bg-video">
    <source src="pain.mp4" type="video/mp4">
  </video>

  <canvas id="particleCanvas"></canvas>

  <nav class="back-nav">
    <button class="back-btn" onclick="window.location.href='index.html'">BACK TO HOME</button>
  </nav>

  <div class="container">
    <header>GANG LIST</header>

    <div class="search-container">
      <i class='bx bx-search'></i>
      <input type="text" id="searchInput" class="search-box" placeholder="SEARCH MEMBERS...">
    </div>

    <section id="founderSection" style="display: none;">
      <h2>Founder</h2>
      <div class="list" id="founderlist"></div>
    </section>

    <section id="leaderSection">
      <h2>Leader</h2>
      <div class="list" id="leaderlist"></div>
    </section>

    <section id="memberSection">
      <h2>Member</h2>
      <div class="list" id="memberlist"></div>
      <div id="pagination-controls" class="pagination-container"></div>
    </section>

    <footer>¬© DESIGNED BY KEN.</footer>
  </div>

  <script src="script.js"></script> 

<script>
    const defaultImage = "https://i.pinimg.com/originals/91/ab/f0/91abf0d74be5d9aeb1346178e70dde96.gif";
    
    // --- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ö‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤ ---
    let allMembers = [];
    const itemsPerPage = 8; // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏•‡∏∞ 8 ‡∏Ñ‡∏ô
    let currentPage = 1;

    // --- üõ°Ô∏è 1. Anti-Inspect ---
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.onkeydown = function(e) {
      if (e.keyCode == 123) return false;
      if (e.ctrlKey && e.shiftKey && (e.keyCode == 73 || e.keyCode == 74)) return false;
      if (e.ctrlKey && e.keyCode == 85) return false;
    };

    // --- üéµ 2. ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏•‡∏á ---
    const music = document.getElementById("list-music");
    const startMusic = () => {
        if (music) {
            music.volume = 0.4;
            music.play().catch(() => {});
            document.removeEventListener('click', startMusic);
        }
    };
    document.addEventListener('click', startMusic);

    // --- üë• 3. ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡πÅ‡∏ö‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤ (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Logic ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ) ---
    function createCard(person) {
      const imgSrc = person.image && person.image.trim() !== "" ? person.image : defaultImage;
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <img src="${imgSrc}" class="profile" alt="profile">
        <h3>${person.name}</h3>
        <a href="${person.facebook}" target="_blank" class="fb-link">FACEBOOK</a>
      `;
      return card;
    }

    function displayMembers(membersArray) {
      const memberList = document.getElementById("memberlist");
      const founderSection = document.getElementById("founderSection");
      const leaderSection = document.getElementById("leaderSection");
      
      memberList.innerHTML = "";

      // ‚≠ê ‡∏à‡∏∏‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏´‡∏ô‡πâ‡∏≤ 1 ‡πÉ‡∏´‡πâ‡∏ã‡πà‡∏≠‡∏ô Founder ‡πÅ‡∏•‡∏∞ Leader
      if (currentPage === 1) {
          // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• founder ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á (‡πÄ‡∏ä‡πá‡∏Ñ‡∏à‡∏≤‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏•‡∏π‡∏Å‡πÉ‡∏ô list ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πá‡πÑ‡∏î‡πâ)
          founderSection.style.display = "block";
          leaderSection.style.display = "block";
      } else {
          founderSection.style.display = "none";
          leaderSection.style.display = "none";
      }

      const start = (currentPage - 1) * itemsPerPage;
      const end = start + itemsPerPage;
      const paginatedItems = membersArray.slice(start, end);
      
      paginatedItems.forEach(p => memberList.appendChild(createCard(p)));
      renderPagination(membersArray.length);
    }

    function renderPagination(totalItems) {
      const totalPages = Math.ceil(totalItems / itemsPerPage);
      const container = document.getElementById("pagination-controls");
      container.innerHTML = "";
      
      if (totalPages <= 1) return;

      for (let i = 1; i <= totalPages; i++) {
        const btn = document.createElement("button");
        btn.innerText = i;
        btn.className = (i === currentPage) ? "page-btn active" : "page-btn";
        btn.onclick = () => {
          currentPage = i;
          displayMembers(allMembers);
          // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤ ‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ‡∏ö‡∏ô‡∏™‡∏∏‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠ Member ‡∏ä‡∏±‡∏î‡πÜ
          window.scrollTo({ top: 0, behavior: 'smooth' });
        };
        container.appendChild(btn);
      }
    }

    fetch("person.json")
      .then(res => res.json())
      .then(data => {
        const founderList = document.getElementById("founderlist");
        const leaderList = document.getElementById("leaderlist");

        const founders = data.filter(p => p.permission === "founder");
        const leaders = data.filter(p => p.permission === "leader");
        allMembers = data.filter(p => p.permission === "member");

        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Founder/Leader ‡πÑ‡∏ß‡πâ‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤ (‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏∏‡∏°‡πÇ‡∏î‡∏¢ displayMembers ‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ)
        if(founders.length > 0) {
            founders.forEach(p => founderList.appendChild(createCard(p)));
        }
        leaders.forEach(p => leaderList.appendChild(createCard(p)));
        
        // ‡∏£‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
        displayMembers(allMembers);

        // --- üîç 4. ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ (‡∏â‡∏ö‡∏±‡∏ö‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÉ‡∏´‡∏°‡πà‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î) ---
const searchInput = document.getElementById("searchInput");

searchInput.addEventListener("input", e => {
  const val = e.target.value.toLowerCase().trim();
  const founderSection = document.getElementById("founderSection");
  const leaderSection = document.getElementById("leaderSection");
  const paginationControls = document.getElementById("pagination-controls");
  const memberList = document.getElementById("memberlist");

  if (val === "") {
    // üü¢ ‡∏Å‡∏£‡∏ì‡∏µ‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ß‡πà‡∏≤‡∏á: ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏ö Page 1 2 3 ‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
    currentPage = 1;
    displayMembers(allMembers); // ‡∏à‡∏∞‡πÇ‡∏ä‡∏ß‡πå Founder/Leader ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤ 1
    paginationControls.style.display = "flex"; 
  } else {
    // üî¥ ‡∏Å‡∏£‡∏ì‡∏µ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤:
    // 1. ‡∏ã‡πà‡∏≠‡∏ô Section ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤
    founderSection.style.display = "none";
    leaderSection.style.display = "none";
    paginationControls.style.display = "none";

    // 2. ‡∏Å‡∏£‡∏≠‡∏á‡∏´‡∏≤‡∏Ñ‡∏ô‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠ Member ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    const filtered = allMembers.filter(m => m.name.toLowerCase().includes(val));
    
    // 3. ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏à‡∏≠
    memberList.innerHTML = "";
    if (filtered.length > 0) {
      filtered.forEach(p => memberList.appendChild(createCard(p)));
    } else {
      memberList.innerHTML = `<p style="opacity: 0.5; width: 100%; margin-top: 20px;">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...</p>`;
    }
  }
});
  </script>
</body>
</html>


